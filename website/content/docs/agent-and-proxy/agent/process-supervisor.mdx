---
layout: docs
page_title: Vault Agent's Process Supervisor Mode
description: >-
  Vault Agent's Process Supervisor Mode allows Vault secrets to be injected
  into a process via environment variables using Consul Template markup.
---

# Vault Agent' Process Supervisor Mode

Vault Agent's  Process Supervisor Mode allows Vault secrets to be injected into
a process via environment variables using
[Consul Template markup][consul-templating-language].

-> If you are running your applications in a Kubernetes cluster, we recommend evaluating the [Vault Secrets Operator](/vault/docs/platform/k8s/vso) instead.

!> Vault Agent Exec is in public beta. <br /> Please provide your feedback by opening a GitHub issue [here](https://github.com/hashicorp/vault/issues).

## Functionality

The `exec` stanza allows you to configure a child process for Vault Agent to run. Secrets are injected into the process
via environment variables configured from `env_template` blocks (see [Template Configurations](template-config) for more info).
When you start Vault Agent with `exec` enabled, it will wait until each environment variable template is rendered at
least once before starting the process.
Vault Agent will restart the process when an update to a injected secret is detected. The frequency secrets are
checked is controlled by the `static_secret_render_interval` configuration in the `template_config` stanza.


## Configuration

The top level `exec` block has the following configuration entries:

- `command` `(string array: required)` - Specify the command for the child process
- `restart_on_secret_changes` `(string: "always")` - Only two accepted options: "always" and "never". Controls child
  process behavior when a secret update is detected.
- `restart_stop_signal` `(string: "SIGTERM")` - Signal to send the child process when a secret has been updated and the
  process needs to be restarted. The process has a 30 seconds after this signal is sent until `SIGKILL` is sent to force
  the child process to stop.


[consul-templating-language]: https://github.com/hashicorp/consul-template/blob/v0.28.1/docs/templating-language.md
[template-config]: /vault/docs/agent-and-proxy/agent/template#template-configurations
